<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
    <title>Google Maps JavaScript API v3 Example: Polyline</title>
    <link href="default.css" rel="stylesheet" type="text/css" />
    <!--<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?sensor=false"></script>-->
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script>
    <script>
      var poly;
      var map;

      function initialize() {
        var geocode = new google.maps.LatLng(28.597239,77.078630);
        var myOptions = {
          zoom: 15,
          center: geocode,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };
   
        map = new google.maps.Map(document.getElementById('map_canvas'), myOptions);
        var polyOptions = {
          strokeColor: '#000F00',
          strokeOpacity: 0.8,
          strokeWeight: 3
        };
        poly = new google.maps.Polyline(polyOptions);
        poly.setMap(map);
      
        // Add a listener for the click event
        google.maps.event.addListener(map, 'click', addLatLng);
      }
      
      /**
      * Handles click events on a map, and adds a new point to the Polyline.
      * @param {MouseEvent} mouseEvent
      */
      
      function addLatLng(event) {
        var path = poly.getPath();
      
        // Because path is an MVCArray, we can simply append a new coordinate
        // and it will automatically appear
        path.push(event.latLng);
      
        // Add a new marker at the new plotted point on the polyline.
        var marker = new google.maps.Marker({
          position: event.latLng,
          title: '#' + path.getLength(),
          map: map
        });
      }
    </script>
  </head>
  <body onload="initialize()">
    <div id="map_canvas"></div>
  </body>
</html>
